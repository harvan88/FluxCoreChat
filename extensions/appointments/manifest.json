{
  "id": "@fluxcore/appointments",
  "name": "Sistema de Turnos",
  "version": "1.0.0",
  "description": "Gestión de turnos y citas con integración IA",
  "author": "FluxCore",
  "preinstalled": false,
  "category": "business",
  "permissions": [
    "read:context.public",
    "read:context.relationship",
    "read:messages",
    "write:enrichments",
    "tools:register",
    "send:messages"
  ],
  "hooks": [
    "onInstall",
    "onUninstall",
    "onMessage",
    "onConfigChange"
  ],
  "tools": [
    {
      "name": "check_availability",
      "description": "Verifica disponibilidad de horarios para un servicio en una fecha específica",
      "parameters": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "description": "Fecha en formato ISO (YYYY-MM-DD)"
          },
          "service": {
            "type": "string",
            "description": "Nombre o ID del servicio solicitado"
          },
          "time": {
            "type": "string",
            "description": "Hora preferida (HH:MM) - opcional"
          }
        },
        "required": ["date", "service"]
      }
    },
    {
      "name": "create_appointment",
      "description": "Crea un nuevo turno/cita",
      "parameters": {
        "type": "object",
        "properties": {
          "clientAccountId": {
            "type": "string",
            "description": "ID de la cuenta del cliente"
          },
          "date": {
            "type": "string",
            "description": "Fecha en formato ISO (YYYY-MM-DD)"
          },
          "time": {
            "type": "string",
            "description": "Hora del turno (HH:MM)"
          },
          "serviceId": {
            "type": "string",
            "description": "ID del servicio"
          },
          "staffId": {
            "type": "string",
            "description": "ID del empleado asignado (opcional)"
          },
          "notes": {
            "type": "string",
            "description": "Notas adicionales"
          }
        },
        "required": ["clientAccountId", "date", "time", "serviceId"]
      }
    },
    {
      "name": "get_appointments",
      "description": "Obtiene los turnos de un cliente o empleado",
      "parameters": {
        "type": "object",
        "properties": {
          "accountId": {
            "type": "string",
            "description": "ID de la cuenta"
          },
          "date": {
            "type": "string",
            "description": "Fecha específica (opcional)"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed", "completed", "cancelled"],
            "description": "Filtrar por estado"
          }
        },
        "required": ["accountId"]
      }
    },
    {
      "name": "cancel_appointment",
      "description": "Cancela un turno existente",
      "parameters": {
        "type": "object",
        "properties": {
          "appointmentId": {
            "type": "string",
            "description": "ID del turno a cancelar"
          },
          "reason": {
            "type": "string",
            "description": "Motivo de la cancelación"
          }
        },
        "required": ["appointmentId"]
      }
    }
  ],
  "configSchema": {
    "businessHours": {
      "type": "object",
      "description": "Horarios de atención",
      "default": {
        "monday": { "open": "09:00", "close": "18:00" },
        "tuesday": { "open": "09:00", "close": "18:00" },
        "wednesday": { "open": "09:00", "close": "18:00" },
        "thursday": { "open": "09:00", "close": "18:00" },
        "friday": { "open": "09:00", "close": "18:00" },
        "saturday": { "open": "09:00", "close": "13:00" },
        "sunday": null
      }
    },
    "slotDuration": {
      "type": "number",
      "default": 30,
      "description": "Duración de cada slot en minutos"
    },
    "advanceBookingDays": {
      "type": "number",
      "default": 30,
      "description": "Días de anticipación máxima para reservar"
    },
    "cancellationHours": {
      "type": "number",
      "default": 24,
      "description": "Horas mínimas de anticipación para cancelar"
    },
    "autoConfirm": {
      "type": "boolean",
      "default": false,
      "description": "Confirmar turnos automáticamente"
    }
  },
  "ui": {
    "sidebar": {
      "icon": "calendar",
      "title": "Turnos"
    },
    "panels": [
      {
        "id": "calendar",
        "title": "Calendario",
        "component": "AppointmentCalendar"
      },
      {
        "id": "services",
        "title": "Servicios",
        "component": "ServicesList"
      }
    ]
  },
  "entrypoint": "./src/index.ts"
}
